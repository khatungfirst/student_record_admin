(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-c643"],{c11S:function(e,r,o){"use strict";var n=o("jo9I");o.n(n).a},jo9I:function(e,r,o){},mYxE:function(e,r,o){"use strict";o.r(r);var n=o("vFRQ"),t=o.n(n);for(var s in n)"default"!==s&&function(e){o.d(r,e,function(){return n[e]})}(s);r.default=t.a},ntYl:function(e,r,o){"use strict";o.r(r);var n=o("qJNa"),t=o("mYxE");for(var s in t)"default"!==s&&function(e){o.d(r,e,function(){return t[e]})}(s);o("c11S");var a=o("KHd+"),i=Object(a.a)(t.default,n.a,n.b,!1,null,null,null);i.options.__file="index.vue",r.default=i.exports},qJNa:function(e,r,o){"use strict";var n=function(){var e=this,r=e.$createElement,o=e._self._c||r;return o("div",{staticClass:"wrapper"},[o("el-form",{ref:"loginForm",staticClass:"card-box login-form",attrs:{autoComplete:"on",model:e.loginForm,rules:e.loginRules,"label-position":"left","label-width":"0px"}},[o("h1",[e._v("Login")]),e._v(" "),o("div",{staticClass:"input-box"},[o("i",{staticClass:"el-icon-message"}),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.loginForm.username,expression:"loginForm.username"}],attrs:{id:"usernameInput",type:"username",required:""},domProps:{value:e.loginForm.username},on:{input:function(r){r.target.composing||e.$set(e.loginForm,"username",r.target.value)}}}),e._v(" "),o("label",{ref:"usernameLabel"},[e._v("账号")])]),e._v(" "),o("div",{staticClass:"input-box"},["checkbox"===e.inputType?o("input",{directives:[{name:"model",rawName:"v-model",value:e.loginForm.password,expression:"loginForm.password"}],attrs:{id:"passwordInput",required:"",type:"checkbox"},domProps:{checked:Array.isArray(e.loginForm.password)?e._i(e.loginForm.password,null)>-1:e.loginForm.password},on:{change:function(r){var o=e.loginForm.password,n=r.target,t=!!n.checked;if(Array.isArray(o)){var s=e._i(o,null);n.checked?s<0&&e.$set(e.loginForm,"password",o.concat([null])):s>-1&&e.$set(e.loginForm,"password",o.slice(0,s).concat(o.slice(s+1)))}else e.$set(e.loginForm,"password",t)}}}):"radio"===e.inputType?o("input",{directives:[{name:"model",rawName:"v-model",value:e.loginForm.password,expression:"loginForm.password"}],attrs:{id:"passwordInput",required:"",type:"radio"},domProps:{checked:e._q(e.loginForm.password,null)},on:{change:function(r){return e.$set(e.loginForm,"password",null)}}}):o("input",{directives:[{name:"model",rawName:"v-model",value:e.loginForm.password,expression:"loginForm.password"}],attrs:{id:"passwordInput",required:"",type:e.inputType},domProps:{value:e.loginForm.password},on:{input:function(r){r.target.composing||e.$set(e.loginForm,"password",r.target.value)}}}),e._v(" "),o("label",{ref:"passwordLabel"},[e._v("密码")]),e._v(" "),o("i",{staticClass:"el-icon-view",on:{click:e.togglePassword}})]),e._v(" "),o("div",{staticClass:"input-box"},[o("img",{attrs:{src:"",alt:""},on:{click:e.getPicCodeFun}}),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.loginForm.verify,expression:"loginForm.verify"}],attrs:{id:"verifyInput",required:""},domProps:{value:e.loginForm.verify},on:{input:function(r){r.target.composing||e.$set(e.loginForm,"verify",r.target.value)}}}),e._v(" "),o("label",[e._v("验证码")])]),e._v(" "),o("el-form-item",[o("el-button",{staticClass:"btn",attrs:{type:"primary",size:"medium",loading:e.loading},on:{click:e.handleLogin}},[e._v("\n        Login\n      ")])],1)],1)],1)},t=[];o.d(r,"a",function(){return n}),o.d(r,"b",function(){return t})},vFRQ:function(e,r,o){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=i(o("14Xm")),t=i(o("D3Ub")),s=o("fe1z"),a=o("XJYT");o("Vtdi");function i(e){return e&&e.__esModule?e:{default:e}}r.default={name:"login",data:function(){return{loginForm:{username:"",password:"",verify:"",base_code:"",verify_id:"",right_verify:""},loginRules:{username:[{required:!0,trigger:"blur",min:11,max:11,message:"账号（学号或者手机号）必须是11位"}],password:[{required:!0,trigger:"blur",min:5,message:"密码必须在5位以上"}]},loading:!1,label:!1,showPassword:!1,inputType:"password"}},computed:{passwordType:function(){return this.showPassword?"text":"password"}},methods:{handleLogin:function(){var e=this;return(0,t.default)(n.default.mark(function r(){var o;return n.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(""!==e.loginForm.username&&11===e.loginForm.username.length){r.next=4;break}(0,a.Message)("账号不能为空，并且长度必须是11位！"),r.next=19;break;case 4:if(""!==e.loginForm.password){r.next=8;break}(0,a.Message)("密码不能为空！"),r.next=19;break;case 8:if(null===e.loginForm.verify&&(0,a.Message)("验证码不能为空！"),e.loginForm.verify!==e.loginForm.right_verify){r.next=18;break}return console.log(e.loginForm.verify,"111111"),r.next=13,(0,s.login)(e.loginForm.username,e.loginForm.password,e.loginForm.verify,e.loginForm.verify_id);case 13:o=r.sent,200===o.code&&(e.$store.dispatch("user/userInfo",o.data),e.$store.dispatch("user/tokenIn",o.data.token),e.$router.push("/")),r.next=19;break;case 18:(0,a.Message)("验证码输入错误，请重新输入！");case 19:case"end":return r.stop()}},r,e)}))()},getPicCodeFun:function(){var e=this;return(0,t.default)(n.default.mark(function r(){var o,t,a,i,l;return n.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,s.getPicCode)();case 3:if(200!==(o=r.sent).code){r.next=19;break}if(e.loginForm.base_code=o.data.B64,e.loginForm.verify_id=o.data.Id,e.loginForm.right_verify=o.data.Hcode,console.log(e.loginForm.right_verify,"verify"),t=e.loginForm.base_code.split(",")[1],console.log(e.loginForm.base_code,"111"),t){r.next=13;break}throw new Error("Invalid base64 string in Data URI");case 13:a=e.convertBase64ToBlob(t),i=URL.createObjectURL(a),(l=document.querySelector("img"))?l.src=i:console.error("Image element not found"),r.next=20;break;case 19:console.error("Failed to fetch picture code",o);case 20:r.next=25;break;case 22:r.prev=22,r.t0=r.catch(0),console.error("Error in getPicCodeFun:",r.t0);case 25:case"end":return r.stop()}},r,e,[[0,22]])}))()},convertBase64ToBlob:function(e){for(var r=atob(e),o=[],n=0;n<r.length;n++)o.push(r.charCodeAt(n));return new Blob([new Uint8Array(o)],{type:"image/jpeg"})},togglePassword:function(){this.showPassword=!this.showPassword,this.inputType=this.showPassword?"text":"password"}},mounted:function(){var e=this;return(0,t.default)(n.default.mark(function r(){return n.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.getPicCodeFun();case 3:console.log("Picture code fetched successfully"),r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),console.error("Error in mounted hook:",r.t0);case 9:case"end":return r.stop()}},r,e,[[0,6]])}))()}}}}]);